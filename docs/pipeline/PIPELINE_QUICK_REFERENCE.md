# νμ΄ν”„λΌμΈ λΉ λ¥Έ μ°Έμ΅° (Quick Reference)

## π€ λΉ λ¥Έ μ‹μ‘ (3μ΄)

```bash
python integrated_pcd_depth_pipeline_newest.py --parent_folder ncdb-cls-sample/synced_data
```

**μ¶λ ¥ μ„μΉ**:
```
ncdb-cls-sample/synced_data/
β”β”€β”€ newest_pcd/              β† ν•©μ„±λ PCD
β”β”€β”€ newest_depth_maps/       β† κΉμ΄ λ§µ (μ›λ³Έ ν•΄μƒλ„)
β”β”€β”€ newest_colormap/         β† μ»¬λ¬ μ‹κ°ν™”
β”β”€β”€ newest_viz_results/      β† λ¶„μ„ ν”λ΅―
β”β”€β”€ newest_synthetic_depth_maps/  β† ν•©μ„± ν¬μΈνΈλ§
β”β”€β”€ diff_results/            β† λΉ„κµ μ΄λ―Έμ§€
β””β”€β”€ 640x384_newest/          β† 640Γ—384 ν•΄μƒλ„ λ²„μ „ (μλ™)
```

---

## π“ μƒμ„Έ νλ¦„λ„

```
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”“
β”ƒ                     INTEGRATED PIPELINE                         β”ƒ
β”—β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”›

μ…λ ¥ λ°μ΄ν„°
β”‚
β”β”€ ncdb-cls-sample/synced_data/pcd/
β”‚  β”β”€ 0000000931.pcd (LiDAR ν¬μΈνΈ ν΄λΌμ°λ“, μ›λ³Έ)
β”‚  β”β”€ 0000000932.pcd
β”‚  β””β”€ ...
β”‚
β””β”€ image_a6/ (RGB μ΄λ―Έμ§€, μ„ νƒμ‚¬ν•­)
   β”β”€ 0000000931.jpg
   β”β”€ 0000000932.jpg
   β””β”€ ...

        β–Ό

β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

STAGE 1: λ„λ΅ λ¶„μ„ (Closest-Line Detection)

  μ…λ ¥: PCD νμΌ (λ¨λ“  ν¬μΈνΈ)
  
  ν•„ν„° 1οΈβƒ£: Z λ²”μ„
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ ground_z_min < z < ground_z_max
  β”‚ (κΈ°λ³Έ: -0.95 < z < 0.5)      β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β–Ό
  ν•„ν„° 2οΈβƒ£: XY κ±°λ¦¬
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ min_xy_dist < ||xy|| < radius_max
  β”‚ (κΈ°λ³Έ: 1.0 < ||xy|| < 10.0)      β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β–Ό
  ν•„ν„° 3οΈβƒ£: X λ°©ν–¥
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ x β‰¤ 0 (λ’¤μ½λ§)      β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
             β–Ό
  μ„ νƒ κΈ°μ¤€: κ°λ„λ³„ μµκ°€κΉμ΄ μ 
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ 360λ„λ¥Ό Nκ° bin μΌλ΅ λ¶„ν•          β”‚
  β”‚ κ° binμ—μ„ 3D κ±°λ¦¬ μµμ†μΈ μ  μ„ νƒ β”‚
  β”‚ β†’ closest_line_points           β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  
  μ¶λ ¥: 
    β€Ά closest_line_points (Nκ°)   β† λ„λ΅ μ„ ν¬μΈνΈ
    β€Ά original_points (Mκ°)       β† μ›λ³Έ μ „μ²΄ ν¬μΈνΈ

β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

STAGE 2: ν•©μ„± ν¬μΈνΈ μƒμ„± (C-Circles Generation)

  μ…λ ¥: original_points
  
  Step 1οΈβƒ£: "λ³΄λΌμƒ‰ μ " μ„ νƒ
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ μ΅°κ±΄: |y| β‰¤ 0.01 && x β‰¤ 0             β”‚
  β”‚ μ„ νƒ: 3D κ±°λ¦¬ μµμ†                    β”‚
  β”‚ β†’ purple = (x_p, y_p, z_p)          β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β–Ό
  Step 2οΈβƒ£: μΆν‘μ¶• κµ¬μ„±
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ c_vec = purple - (0, 0, -0.771)     β”‚
  β”‚ νμ „μ¶• u_elev, u_tan κ³„μ‚°            β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β–Ό
  Step 3οΈβƒ£: λ°κ²½ λ¶„ν• 
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ radii = [r1, r2, ..., r_50]     β”‚
  β”‚ (c_vec κΈΈμ΄λ¥Ό 50λ“±λ¶„, λλ” μ΅°μ •) β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β–Ό
  Step 4οΈβƒ£: μ› μƒμ„±
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ κ° λ°κ²½ r λ§λ‹¤:                           β”‚
  β”‚   μ¤‘μ‹¬: (0, 0, -0.771)                   β”‚
  β”‚   λ°μ§€λ¦„: r                              β”‚
  β”‚   λ¶„ν• : 512κ° μ μΌλ΅ μ› λ¶„ν•  (360λ„)     β”‚
  β”‚                                          β”‚
  β”‚ ν•„ν„°: x β‰¤ 0 μμ—­λ§ μ μ§€ (κ²€μ€ κ³ λ¦¬)      β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                 β–Ό
  μ¶λ ¥:
    β€Ά synthetic_points (Kκ°)  β† κ²€μ€ κ³ λ¦¬ ν•νƒ
  
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

STAGE 3: ν¬μΈνΈ λ³‘ν•© (Point Merging)

  μ›λ³Έ ν¬μΈνΈ + ν•©μ„± ν¬μΈνΈ
  
  merged_points = [original_points, synthetic_points]
                    (Mκ° + Kκ° = M+Kκ°)
  
  λΌλ²¨ μ§€μ •:
  β€Ά original_points β†’ label = 0
  β€Ά synthetic_points β†’ label = 1

β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

STAGE 4: κΉμ΄ λ§µ μƒμ„± (1920Γ—1536)

  μ…λ ¥:
  β€Ά μ›λ³Έ ν¬μΈνΈλ“¤ + ν•©μ„± ν¬μΈνΈλ“¤
  β€Ά μΉ΄λ©”λΌ λ³΄μ • μ •λ³΄ (VADAS Fisheye)
  β€Ά ν•΄μƒλ„: 1920Γ—1536
  
  λ³€ν™:
  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  β”‚ LiDAR μΆν‘                          β”‚
  β”‚    β”‚                               β”‚
  β”‚    β–Ό                               β”‚
  β”‚ Transform: Lidar β†’ Camera          β”‚
  β”‚ (νμ „ + μ΄λ™)                       β”‚
  β”‚    β”‚                               β”‚
  β”‚    β–Ό                               β”‚
  β”‚ Camera μΆν‘ (Xc, Yc, Zc)          β”‚
  β”‚    β”‚                               β”‚
  β”‚    β–Ό                               β”‚
  β”‚ ν•„ν„°: Xc > 0 (μΉ΄λ©”λΌ μ•μ½)         β”‚
  β”‚ ν•„ν„°: Y/X λ²”μ„ (νΉμ • μμ—­λ§)       β”‚
  β”‚    β”‚                               β”‚
  β”‚    β–Ό                               β”‚
  β”‚ VADAS ν¬μ κ³µμ‹                    β”‚
  β”‚ theta = atan2(sqrt(YcΒ²+ZcΒ²), Xc)  β”‚
  β”‚ xd = theta * s                     β”‚
  β”‚ rd = poly(xd) / div                β”‚
  β”‚ u = rd*cos(phi) + ux + W/2         β”‚
  β”‚ v = rd*sin(phi) + uy + H/2         β”‚
  β”‚    β”‚                               β”‚
  β”‚    β–Ό                               β”‚
  β”‚ 2D ν”½μ…€ μΆν‘ (u, v)                β”‚
  β”‚    β”‚                               β”‚
  β”‚    β–Ό                               β”‚
  β”‚ μ¤ν΄λ£¨μ „ κ²€μ‚¬                       β”‚
  β”‚ (κ°€μ¥ κ°€κΉμ΄ μ λ§ μ μ§€)             β”‚
  β”‚    β”‚                               β”‚
  β”‚    β–Ό                               β”‚
  β”‚ κΉμ΄ λ§µ (1920Γ—1536)                β”‚
  β”‚ κ° ν”½μ…€ = Xc κ°’ (κ±°λ¦¬, m)          β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
  
  λ™μ‹ μƒμ„±:
  β€Ά depth_orig (μ›λ³Έ ν¬μΈνΈλ§)
  β€Ά depth_synth (ν•©μ„± ν¬μΈνΈλ§)
  β€Ά depth_merge (μ›λ³Έ + ν•©μ„±, ν•©μ„±μ΄ μ°μ„ )
  β€Ά provenance (κ° ν”½μ…€μ μ¶μ²: -1/0/1)

        β–Ό

β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

STAGE 5: 640Γ—384 ν•΄μƒλ„ μƒμ„± (μ„ νƒ)

  κΈ°μ΅΄ λ΅μ§ λ°λ³µ, λ‹¨ ν•΄μƒλ„λ§ λ‹¤λ¦„
  
  μ¤μΌ€μΌ κ³„μ‚°:
  scale_x = 640 / 1920 = 0.333...
  scale_y = 384 / 1536 = 0.25
  
  μΉ΄λ©”λΌ νλΌλ―Έν„° μ΅°μ •:
  ux_scaled = ux_original * scale_x
  uy_scaled = uy_original * scale_y
  
  μ¶λ ¥: 640x384_newest/ ν΄λ”μ— λ™μΌ κµ¬μ΅°λ΅ μ €μ¥

β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

STAGE 6: μ‹κ°ν™” λ° μ €μ¥ (Visualization & Export)

  κΉμ΄ λ§µ β†’ λ‹¤μ–‘ν• ν¬λ§·μΌλ΅ λ³€ν™:
  
  1οΈβƒ£ 16-bit PNG (μ›λ³Έ κΉμ΄)
     β”β”€ depth * 256 β†’ uint16
     β””β”€ newest_depth_maps/
  
  2οΈβƒ£ μ»¬λ¬λ§µ (μ‹κ°ν™”μ©)
     β”β”€ JET μ»¬λ¬λ§µ μ μ©
     β”β”€ 0 ν”½μ…€ = ν°μƒ‰ (λ°°κ²½)
     β””β”€ newest_colormap/
  
  3οΈβƒ£ λ¶„μ„ ν”λ΅―
     β”β”€ κΉμ΄ λ§µ κ·Έλ¦¬λ“
     β”β”€ νμ¤ν† κ·Έλ¨
     β”β”€ ν†µκ³„ μ •λ³΄ (min/max/mean/std)
     β””β”€ newest_viz_results/
  
  4οΈβƒ£ Diff λΉ„κµ (μ»¬λ¬)
     β”β”€ diff_merged_path (μ›λ³Έ+ν•©μ„±)
     β”β”€ diff_synth_path (ν•©μ„±λ§)
     β”β”€ diff_orig_path (μ›λ³Έλ§)
     β””β”€ diff_results/
  
  5οΈβƒ£ ν•©μ„± ν¬μΈνΈ μ „μ© κΉμ΄
     β””β”€ newest_synthetic_depth_maps/
  
  6οΈβƒ£ PCD νμΌ (λ³‘ν•©λ ν¬μΈνΈ)
     β””β”€ newest_pcd/

        β–Ό

β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

μµμΆ… μ¶λ ¥

ncdb-cls-sample/synced_data/
β”‚
β”β”€β”€ newest_pcd/
β”‚   β”β”€β”€ 0000000931.pcd (μ›λ³Έ + ν•©μ„± λ³‘ν•©)
β”‚   β””β”€β”€ ...
β”‚
β”β”€β”€ newest_depth_maps/
β”‚   β”β”€β”€ 0000000931.png (16-bit, μ›λ³Έ ν•΄μƒλ„)
β”‚   β””β”€β”€ ...
β”‚
β”β”€β”€ newest_colormap/
β”‚   β”β”€β”€ 0000000931_colorized.png (μ‹κ°ν™”μ©)
β”‚   β””β”€β”€ ...
β”‚
β”β”€β”€ newest_viz_results/
β”‚   β”β”€β”€ 0000000931_depth_analysis.png (λ¶„μ„)
β”‚   β””β”€β”€ ...
β”‚
β”β”€β”€ newest_synthetic_depth_maps/
β”‚   β”β”€β”€ 0000000931.png (ν•©μ„±λ§)
β”‚   β””β”€β”€ ...
β”‚
β”β”€β”€ diff_results/
β”‚   β”β”€β”€ 0000000931_merged.png (Diff)
β”‚   β”β”€β”€ 0000000931_synth.png
β”‚   β”β”€β”€ 0000000931_orig.png
β”‚   β””β”€β”€ ...
β”‚
β””β”€β”€ 640x384_newest/
    β”β”€β”€ newest_pcd/
    β”β”€β”€ newest_depth_maps/     β† 640Γ—384
    β”β”€β”€ newest_colormap/
    β”β”€β”€ newest_viz_results/
    β”β”€β”€ newest_synthetic_depth_maps/
    β””β”€β”€ diff_results/
```

---

## π“‹ ν•µμ‹¬ νλΌλ―Έν„° μ„¤λ…

| νλΌλ―Έν„° | κΈ°λ³Έκ°’ | λ²”μ„/μ„¤λ… |
|---------|------|--------|
| `--parent_folder` | β… ν•„μ | λ°μ΄ν„° ν΄λ” |
| `--camera` | `"a6"` | μΉ΄λ©”λΌ μ΄λ¦„ |
| `--ground_z_min` | `-0.95` | μ§€λ©΄ ν•ν• (m) |
| `--ground_z_max` | `0.5` | μ§€λ©΄ μƒν• (m) |
| `--min_xy_distance` | `1.0` | μµμ† κ±°λ¦¬ (m) |
| `--xy_radius_threshold` | `10.0` | μµλ€ κ±°λ¦¬ (m) |
| `--diff_point_size` | `3` | Diff μ  ν¬κΈ° |
| `--diff_point_iterations` | `1` | ν½μ°½ λ°λ³µ νμ |

**ν•„ν„° ν¨κ³Ό μ΄ν•΄**:
```
ground_z_min / ground_z_max
  β–² Z (λ†’μ΄, m)
  β”‚
  β”‚  0.5 β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ μƒν• (μΉ΄λ©”λΌ λ†’μ΄ κ·Όμ²)
  β”‚      β”‚
  β”‚  0.0 β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ μ§€ν‘λ©΄
  β”‚      β”‚
  β”‚ -0.5 β”‚ (μΌλ°μ μΈ λ„λ΅ μμ—­)
  β”‚      β”‚
  β”‚ -0.95β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ ν•ν• (μ§€ν• μμ—­)
  β”‚
  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ Y
```

**XY κ±°λ¦¬ ν•„ν„°**:
```
         β–² Y (μΆμ°)
         β”‚
    10m  β”‚      β”β”€β”€β”€β”€β”€β”€β”
         β”‚      β”‚      β”‚
         β”‚  x <= 0 λ§ μ²λ¦¬
         β”‚      β”‚      β”‚
     1m  β”‚      β””β”€β”€β”€β”€β”€β”€β”
         β”‚              
    μ›μ  β”‚ β†β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€ X (μ•λ’¤)
         β”‚  
    λ‚΄λ¶€ β”‚ (μΉ΄λ©”λΌμ—μ„ λ³Έ κ°λ„)
        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ X
```

---

## π”„ λ°λ³µ μ²λ¦¬ (Multi-File)

```
For each PCD file:
  β”β”€ [PROCESS] Starting {filename}.pcd...
  β”β”€ [1] Closest-line extraction
  β”β”€ [2] Synthetic point generation
  β”β”€ [3] Point merging
  β”β”€ [4] Depth map generation (1920Γ—1536)
  β”β”€ [5] Depth map generation (640Γ—384)
  β”β”€ [6-10] Visualization/Export
  β””β”€ [SUCCESS] Completed {filename}

Progress: [β–β–β–β–β–β–β–β–β–‘β–‘] 80% (100/123)
ETA: 00:45
```

---

## π’Ύ μ €μ¥ ν¬λ§· μƒμ„Έ

### κΉμ΄ λ§µ (PNG 16-bit)
```
ν”½μ…€κ°’ = κΉμ΄(m) Γ— 256

μ: 
  - 1m λ–¨μ–΄μ§ β†’ ν”½μ…€κ°’ 256
  - 5m λ–¨μ–΄μ§ β†’ ν”½μ…€κ°’ 1280
  - 10m λ–¨μ–΄μ§ β†’ ν”½μ…€κ°’ 2560

μ½μ„ λ•: ν”½μ…€κ°’ / 256 = κΉμ΄(m)
```

### μ»¬λ¬λ§µ (PNG RGB)
```
μ •κ·ν™”: depth / max_depth β†’ [0, 1]
μ»¬λ¬λ§µ: JET μ μ© β†’ RGB
  β€Ά νλ€μƒ‰: κ°€κΉμ›€ (0m)
  β€Ά μ΄λ΅μƒ‰: μ¤‘κ°„
  β€Ά λ…Έλ€μƒ‰: μ΅°κΈ λ©
  β€Ά λΉ¨κ°„μƒ‰: λ© (15m)
  β€Ά ν°μƒ‰: μ ν¨ κΉμ΄ μ—†μ (λ°°κ²½)
```

### PCD (ASCII)
```
# .PCD v0.7 - Point Cloud Data file format
VERSION 0.7
FIELDS x y z
SIZE 4 4 4
TYPE F F F
COUNT 1 1 1
WIDTH {ν¬μΈνΈ κ°μ}
HEIGHT 1
VIEWPOINT 0 0 0 1 0 0 0
POINTS {ν¬μΈνΈ κ°μ}
DATA ascii
x1 y1 z1
x2 y2 z2
...
```

---

## π― μΌλ°μ μΈ μ‚¬μ© μ‚¬λ΅€

### Case 1: κΈ°λ³Έ μ‹¤ν–‰
```bash
python integrated_pcd_depth_pipeline_newest.py \
    --parent_folder ncdb-cls-sample/synced_data
```
β… λ¨λ“  κΈ°λ³Έ μµμ… μ‚¬μ©, μλ™μΌλ΅ 640Γ—384λ„ μƒμ„±

### Case 2: ν•΄μƒλ„ μ„ νƒμ  μƒμ„± (640Γ—384 μ¤ν‚µ)
```bash
# 640x384_newest/ ν΄λ”λ¥Ό λ―Έλ¦¬ μƒμ„±ν•΄λ‘λ©΄ μλ™ μ¤ν‚µ
mkdir ncdb-cls-sample/synced_data/640x384_newest

python integrated_pcd_depth_pipeline_newest.py \
    --parent_folder ncdb-cls-sample/synced_data
```
β… 1920Γ—1536λ§ μƒμ„±

### Case 3: ν•„ν„° μ΅°μ • (λ„λ΅ λ²”μ„ μΆνκΈ°)
```bash
python integrated_pcd_depth_pipeline_newest.py \
    --parent_folder ncdb-cls-sample/synced_data \
    --ground_z_min -0.5 \
    --ground_z_max 0.3 \
    --min_xy_distance 2.0 \
    --xy_radius_threshold 8.0
```
β… λ” μΆμ€ λ„λ΅ μμ—­λ§ μ²λ¦¬

### Case 4: Diff μ΄λ―Έμ§€ μ¤νƒ€μΌ μ΅°μ •
```bash
python integrated_pcd_depth_pipeline_newest.py \
    --parent_folder ncdb-cls-sample/synced_data \
    --diff_point_size 5 \
    --diff_point_iterations 2
```
β… Diff μ΄λ―Έμ§€μ μ μ΄ λ” ν¬κ³  λ‘κ»κ²

---

## β΅ μ„±λ¥ ν

**λΉ λ¥΄κ² ν•κΈ°**:
1. μ‘μ€ λ°μ΄ν„°μ…‹λ¶€ν„° ν…μ¤νΈ (1-10 νμΌ)
2. 640Γ—384 μƒμ„± μ¤ν‚µ (ν° ν΄λ” λ―Έλ¦¬ μƒμ„±)
3. μ‹κ°ν™” μ κ±° (μ½”λ“ μμ •)

**λ©”λ¨λ¦¬ μ μ•½**:
1. ν¬μΈνΈ μ λ§μΌλ©΄ λ°°μΉ μ²λ¦¬ (ν• λ²μ— 100κ°μ”©)
2. μ„μ‹ λ³€μ λ…μ‹ ν•΄μ 

**ν’μ§ κ°μ„ **:
1. λ³΄μ • λ°μ΄ν„° μ •ν™•λ„ λ†’μ΄κΈ°
2. ν•„ν„° νλΌλ―Έν„° νλ‹
3. ν•©μ„± ν¬μΈνΈ μ μ¦κ°€ (NUM_C_RADII, CIRCLE_SEGS)

---

## π› νΈλ¬λΈ”μν…

| λ¬Έμ  | μ›μΈ | ν•΄κ²° |
|-----|------|-----|
| "No PCD files found" | pcd ν΄λ” μ—†μ | --parent_folder ν™•μΈ |
| "Sensor 'a6' not found" | DEFAULT_CALIB μ¤λ¥ | μ½”λ“ μƒλ‹¨ μ„¤μ • ν™•μΈ |
| κΉμ΄ λ§µ κ²€μ •μƒ‰ | Xc < 0 ν¬μΈνΈ λ§μ | ground_z λ²”μ„ μ΅°μ • |
| λ„λ¬΄ μ¤λ κ±Έλ¦Ό | ν° PCD νμΌ | ν¬μΈνΈ ν•„ν„° κ°•ν™” |
| λ©”λ¨λ¦¬ λ¶€μ΅± | ν° λ°μ΄ν„° | λ°°μΉ μ²λ¦¬ κµ¬ν„ |

---

## π“ μ°Έκ³  μλ£

- **μΉ΄λ©”λΌ λ¨λΈ**: VADAS Polynomial Fisheye Camera Model
- **ν¬μΈνΈ ν΄λΌμ°λ“**: PCD ν¬λ§· (ASCII)
- **κΉμ΄ λ§µ**: 16-bit PNG (KITTI μ»¨λ²¤μ…)
- **μ‹κ°ν™”**: matplotlib + OpenCV

λ” μμ„Έν• μ„¤λ…: `PIPELINE_EXPLANATION.md` μ°Έκ³ 
